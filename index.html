<!doctype html>
<html>
  <script>
    var Module = {
      onRuntimeInitialized: function() {
        /*
        #include <stdio.h>
        #include <fnmatch.h>
        
        int main()
        {
            char pattern[] = "*.c";
            char string[] = "hello.c";
            int r;
        
            r = fnmatch(pattern,string,0);
            if( r==0 )
                printf("'%s' matches '%s'\n",
                        pattern,
                        string
                      );
            else if( r==FNM_NOMATCH )
                printf("'%s' does not match '%s'\n",
                        pattern,
                        string
                      );
            else
                fprintf(stderr,"fnmatch() error\n");
        
            return(0);
        }
        */
        const r = Module.fnmatch("*.c", "hello.c", 0);
        if (r == 0) {
          console.log("matches");
        } else if (r == Module.FNM_NOMATCH) {
          console.log("does not  match");
        } else {
          console.error("fnmatch() returns unexpected value");
        }

        {
          const constainer = document.getElementById("container");
          /*
          [fnmatch - Unix filename pattern matching in Python - GeeksforGeeks](https://www.geeksforgeeks.org/python/fnmatch-unix-filename-pattern-matching-python/)
          
          $ python fnmatch_fnmatch.py
          
          Pattern : fnmatch_*.py
          
          Filename: __init__.py               False
          Filename: fnmatch_filter.py         True
          Filename: fnmatch_fnmatch.py        True
          Filename: fnmatch_fnmatchcase.py    True
          Filename: fnmatch_translate.py      True
          Filename: index.rst                 False
          */
          const query = "fnmatch_*.py";
          [
            { fileName: "__init__.py", expected: false },
            { fileName:"fnmatch_filter.py", expected: true },
            { fileName:"fnmatch_fnmatch.py", expected: true },
            { fileName:"fnmatch_fnmatchcase.py", expected: true },
            { fileName:"fnmatch_translate.py", expected: true },
            { fileName:"index.rst", expected: false }
          ].map(({ fileName, expected }) => {
            const isMatched = (Module.fnmatch(query, fileName, 0) == 0);
            return `"${fileName}" is matched with "${query}"? ${isMatched}, correct? ${isMatched == expected }`
          })
          .forEach(str => {
            constainer.innerHTML += `<p>${str}</p>`;
          })
        }
      }
    };
  </script>
  <div id="container"></div>
  <script src="./fnmatch.js"></script>
</html>
